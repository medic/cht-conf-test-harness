<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Global</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Global</h1>

    




<section>

<header>
    
        <h2></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="fillContactForm"><span class="type-signature">(async) </span>fillContactForm<span class="signature">(contactType, action, &hellip;answers)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Loads and fills a contact form with the appropriate action
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>contactType</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">Type of contact that should be created</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>action</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">one of 'create' or 'edit'</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>answers</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                    &lt;repeatable><br>
                
                </td>
            

            

            <td class="description last">Provide an array for the answers given on each page. See fillForm for more details.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="harness.js.html">harness.js</a>, <a href="harness.js.html#line686">line 686</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    

    
        <h3 class="subsection-title">Type Definitions</h3>

        
                
<h4 class="name" id="ContactSummary">ContactSummary</h4>










    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fields</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Field></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>cards</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Card></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>context</code></td>
            

            <td class="type">
            
                
<span class="param-type">Context</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="harness.js.html">harness.js</a>, <a href="harness.js.html#line636">line 636</a>
    </li></ul></dd>
    

    

    

    
</dl>






            
                
<h4 class="name" id="FillError">FillError</h4>




<div class="description">
    An object describing an error which has occurred while filling a form.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Object</span>


        </li>
    </ul>





    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">A classification of the error [ 'validation', 'general', 'page' ]</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>msg</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Description of the error</td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="form-host_form-filler.js.html">form-host/form-filler.js</a>, <a href="form-host_form-filler.js.html#line27">line 27</a>
    </li></ul></dd>
    

    

    

    
</dl>






            
                
<h4 class="name" id="FillResult">FillResult</h4>




<div class="description">
    An object describing the result of filling a form.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Object</span>


        </li>
    </ul>





    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>errors</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;<a href="global.html#FillError">FillError</a>></span>


            
            </td>

            

            

            <td class="description last">A list of errors</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>section</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The page number on which the errors occurred</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>report</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">The report object which resulted from submitting the filled report. Undefined if an error blocks form submission.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>additionalDocs</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Object></span>


            
            </td>

            

            

            <td class="description last">An array of database documents which are created in addition to the report.</td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="form-host_form-filler.js.html">form-host/form-filler.js</a>, <a href="form-host_form-filler.js.html#line18">line 18</a>
    </li></ul></dd>
    

    

    

    
</dl>






            
                
<h4 class="name" id="HarnessInputs">HarnessInputs</h4>




<div class="description">
    cht-config-test-harness provides interfaces for mocking all inputs so you can easily test the possible behaviors of your configuration.
The data of the HarnessInputs represents the environment/data in which your forms, tasks, targets, and contact-summaries are running within your CHT application.

You can provide default values for these inputs through a file called `harness.defaults.json` in your configuration project's folder ([example](https://github.com/medic/cht-conf-test-harness/blob/master/harness.defaults.json.example)).
</div>







    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>user</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">This represents the current user that is logged into the system. Use this for testing whenever your system behaves differently for different users.
In harness.fillForm(), this is the data bound to `inputs/user` (hydrated).
In harness.getTargets(), this is the global `user` object available in targets.js. (hydrated)
In harness.getTasks(), this is the global `user` object available in tasks.js. (hydrated)
In contact-summary code, this is the global `user` object in contact-summary.templated.js. (hydrated)</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>userRoles</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            

            

            <td class="description last">This represents the 'roles' assigned to the current user that is logged in. Roles control the user's permissions ([roles documentation](https://docs.communityhealthtoolkit.org/apps/concepts/users/#roles))</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>subject</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">This represents the contact that is being "acted on" or the "subject of the test".
The harness.fillForm() function simulates "completing an action" on the subject's profile page.
The harness.getTasks() function returns the tasks listed on the subject's profile page.
The harness.getContactSummary() function returns the contact summary information displayed for the subject.

`subject` can be an `object` or a `string`. Assigning `subject` a `string` should be preferred as it will result in behavior closest to the CHT. The `subject` should be set to the `_id` of the contact document present
in `HarnessInputs.docs`. The harness will pull in the appropriate contact and hydrate it automatically.  Assigning `subject` an `object` will skip any integration with `docs` and skips hydration - the exact value set
will be used. This is powerful and useful for unit testing, but should be avoided during integration testing.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>content</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">This is the data that will be passed into an XForm via loadForm(). Tasks have the ability to set this data via the
<a href="https://github.com/medic/medic-docs/blob/master/configuration/developing-community-health-applications.md#task-schema">modifyContent</a> interface.
Recommendeded to leave this undefined in `harness.defaults.json`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>contactSummary</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Set this value to mock the data passed into app forms via `instance('contact-summary')/context`. This is mocking the
<a href="https://github.com/medic/medic-docs/blob/master/configuration/developing-community-health-applications.md#context">context</a> information that is
returned by the contact-summary.  If left empty, the `context` returned by getContactSummary will be used.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>docs</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Object></span>


            
            </td>

            

            

            <td class="description last">This simulates the documents on the user's device when the test begins.</td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jsdocs.js.html">jsdocs.js</a>, <a href="jsdocs.js.html#line27">line 27</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li>userRoles For setting the user's role</li>
        </ul>
    </dd>
    

    
</dl>





    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>harness.userRoles = ['chw']</code></pre>

        <p class="code-caption">harness.defaults.json using subject as a string (preferred)</p>
    
    <pre class="prettyprint"><code>{
  "coreVersion": "3.10.3",
  "subject": "patient_id",

  "docs": [
    {
      "_id": "patient_id",
      "name": "Sick Bob",
      "type": "person",
      "reported_date": 1550559625153,
      "parent": {
        "_id": "family_id",
        "parent": {
          "_id": "chw_area_id"
        },
      }
    },

    {
      "_id": "family_id",
      "type": "clinic",
      "parent": {
        "_id": "chw_area_id"
      },
    },
  ]
}</code></pre>

        <p class="code-caption">harness.defaults.json using mock object</p>
    
    <pre class="prettyprint"><code>{
  "coreVersion": "3.10.3",
  "subject":  {
    "_id": "patient_id",
    "name": "Sick Bob",
    "type": "person",
    "reported_date": 1550559625153,
    "parent": {
      "_id": "family_id",
      "type": "clinic",
      "parent": {
        "_id": "chw_area_id"
      },
    }
  },

  "docs": []
}</code></pre>



            
                
<h4 class="name" id="HarnessState">HarnessState</h4>










    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>console</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Object></span>


            
            </td>

            

            

            <td class="description last">Each element represents an event within Chrome console.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>contacts</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Object></span>


            
            </td>

            

            

            <td class="description last">All contacts known to nools.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>reports</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Object></span>


            
            </td>

            

            

            <td class="description last">All reports known to nools.</td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="harness.js.html">harness.js</a>, <a href="harness.js.html#line584">line 584</a>
    </li></ul></dd>
    

    

    

    
</dl>






            
                
<h4 class="name" id="Target">Target</h4>




<div class="description">
    An emitted target. The structure of emitted targets may vary by the version of cht-conf and the version of the medic webapp. In general, target have this structure.
</div>







    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">The aggregated calculation based on the instances.
                <h6>Properties</h6>

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>pass</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>total</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>percent</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jsdocs.js.html">jsdocs.js</a>, <a href="jsdocs.js.html#line17">line 17</a>
    </li></ul></dd>
    

    

    

    
</dl>






            
                
<h4 class="name" id="Task">Task</h4>




<div class="description">
    <a href="https://docs.communityhealthtoolkit.org/core/overview/db-schema/#tasks">CHT Task Documents</a>.
</div>







    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">uuid</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>user</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The user settings id of the user who calculated and created the document. Used for controlling replication. (eg. org.couchdb.user:agatha)</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>requester</code></td>
            

            <td class="type">
            
                
<span class="param-type">uuid</span>


            
            </td>

            

            

            <td class="description last">The guid of the contact whose data brought about the creation of the document. Used for controlling cancellation.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>owner</code></td>
            

            <td class="type">
            
                
<span class="param-type">uuid</span>


            
            </td>

            

            

            <td class="description last">string The guid of the contact whose profile this task will appear on in the contact’s tab.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>emission</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Minified data emitted from the partner code.
                <h6>Properties</h6>

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>forId</code></td>
            

            <td class="type">
            
                
<span class="param-type">uuid</span>


            
            </td>

            

            

            <td class="description last">If completing a task’s action opens a form. Completing the form creates a report. forId is the guid of the contact information that will be passed into the form. For most forms, the resulting report will be associated with this contact.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>title</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The "name" attribute of the <a href="https://docs.communityhealthtoolkit.org/apps/reference/tasks/#tasksjs">task configuration</a></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>contact.name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The name that will appear beside the task on the tasks tab. The "contactLabel" attribute of the <a href="https://docs.communityhealthtoolkit.org/apps/reference/tasks/#tasksjs">task configuration</a></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>startDate</code></td>
            

            <td class="type">
            
                
<span class="param-type">date</span>


            
            </td>

            

            

            <td class="description last">The date at which time the task will be displayed to the user. Before this date, the task document will be in state "Draft".</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>endDate</code></td>
            

            <td class="type">
            
                
<span class="param-type">date</span>


            
            </td>

            

            

            <td class="description last">The date at which time the task will no longer be displayed to the user. After this date, the task will move to state "Failed".</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>stateHistory</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last">Each time the state attribute changes, the time of the change is recorded in the state history.</td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jsdocs.js.html">jsdocs.js</a>, <a href="jsdocs.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>






            
    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="mock.cht-conf.module_contact-summary-lib.html">contact-summary-lib</a></li><li><a href="mock.cht-conf.module_nools-lib.html">nools-lib</a></li><li><a href="mock.rules-engine.module_rules-emitter.html">rules-emitter</a></li><li><a href="module-core-adapter.html">core-adapter</a></li></ul><h3>Classes</h3><ul><li><a href="Harness.html">Harness</a></li></ul><h3>Global</h3><ul><li><a href="global.html#fillContactForm">fillContactForm</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Tue Apr 12 2022 01:26:36 GMT+0300 (East Africa Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>